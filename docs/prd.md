## **콘서트 예매 페이지 제작**

### **1. 개요**

#### **1.1. 프로젝트 목표**
로그인 없이 이름·휴대폰 번호만으로 90초 안에 좌석을 확보할 수 있는 반응형 콘서트 예매 웹.
본 프로젝트는 동적인 콘서트 예매 웹 페이지를 제작하는 것을 목표로 합니다. 
사용자는 콘서트 목록을 확인하고, 원하는 날짜와 시간을 선택한 후, 시각적으로 표현된 좌석 배치도에서 직접 좌석을 선택하여 예매하는 전체 과정을 원활하게 진행할 수 있어야 합니다.

#### **1.2. 주요 기능**
- **콘서트 목록 조회**: 현재 예매 가능한 콘서트 목록을 카드 형태로 보여줍니다.
- **날짜 및 회차 선택**: 특정 콘서트의 예매 가능한 날짜와 시간(회차)을 선택할 수 있습니다.
- **실시간 좌석 선택**: 선택된 날짜와 회차에 따라 실시간으로 좌석 현황을 시각적으로 표시하고, 사용자가 직접 좌석을 선택 및 취소할 수 있습니다.
- **예매 정보 확인**: 사용자가 선택한 좌석 정보와 총 결제 금액을 실시간으로 보여줍니다.
- **예약 완료 처리**: 좌석 선택을 완료하고 예약 절차를 마무리합니다.
- **예약 조회 및 취소 처리**: 사용자가 예약을 조회 및 취소할 수 있습니다.

#### **1.3. 기술 스택 (기획 관점 명세)**

**프론트엔드**
- **Next.js 15**: React 기반 풀스택 프레임워크, App Router 사용
- **React**: 사용자 인터페이스 구축을 위한 JavaScript 라이브러리
- **TypeScript**: 정적 타입 검사를 통한 코드 안정성 및 개발 효율성 향상
- **TailwindCSS**: 유틸리티 기반 CSS 프레임워크로 빠른 스타일링
- **shadcn/ui**: 접근성과 사용성을 고려한 재사용 가능한 UI 컴포넌트 라이브러리

**백엔드**
- **Hono.js (Edge)**: 경량 웹 프레임워크, Edge Runtime에서 실행되어 빠른 응답 속도 제공
- **Supabase (PostgreSQL)**: 실시간 데이터베이스 및 인증 서비스, 콘서트/예약 데이터 저장
- **Redis**: 좌석 락(Lock) 관리를 통한 동시 예약 충돌 방지 및 임시 예약 상태 관리

**상태 관리 및 실시간 통신**
- **@tanstack/react-query**: 서버 상태 관리, 캐싱, 동기화를 통한 효율적인 데이터 페칭
- **WebSocket**: 실시간 좌석 상태 업데이트 및 사용자 간 동기화

#### **1.4. Stakeholders (이해관계자)**

**Primary Stakeholders**
- **콘서트 예매 사용자**: 콘서트 티켓을 구매하려는 일반 고객
- **콘서트 주최자/기획사**: 공연을 기획하고 티켓 판매를 관리하는 주체
- **티켓 판매 관리자**: 예매 시스템을 운영하고 관리하는 담당자

**Secondary Stakeholders**
- **개발팀**: 프론트엔드, 백엔드, QA 엔지니어
- **디자인팀**: UI/UX 디자이너
- **비즈니스팀**: 기획자, 마케터, 데이터 분석가
- **고객 지원팀**: 예매 관련 문의 및 이슈 처리 담당자

---

### **2. 타겟 유저 및 사용자 여정**

#### **2.1. 타겟 유저 세그먼트**

**Primary Persona: 콘서트 애호가 (20-40대)**
- **특징**: 정기적으로 콘서트 관람, 모바일 우선 사용, 빠른 예매 선호
- **니즈**: 빠르고 직관적인 예매 프로세스, 좌석 선택의 자유도, 실시간 좌석 현황 확인
- **페인포인트**: 복잡한 예매 과정, 좌석 현황 파악 어려움, 인기 공연 매진 시 대안 부족
- **기대 행동**: 공연 정보 사전 확인 → 빠른 예매 진행 → 최적 좌석 선택

**Secondary Persona: 가끔 관람객 (전 연령대)**
- **특징**: 특별한 공연이나 기념일에 가끔 관람, 데스크톱/모바일 혼용 사용
- **니즈**: 명확한 안내와 도움말, 실수 방지 기능, 예매 과정의 투명성
- **페인포인트**: 예매 시스템 사용법 미숙, 취소/변경 정책 불명확, 좌석 등급별 차이 이해 부족
- **기대 행동**: 신중한 정보 검토 → 단계별 확인 → 안전한 예매 완료

#### **2.2. Information Architecture (IA)**

```
VMC3 티켓 예매 시스템
├── 메인 페이지 (/)
│   ├── 헤더 (로고, 네비게이션)
│   ├── 콘서트 목록 섹션
│   │   ├── 콘서트 카드 (포스터, 제목, 예매하기 버튼)
│   │   └── 더보기/페이지네이션
│   └── 푸터
├── 예약 페이지 (/booking/[concertId])
│   ├── 콘서트 정보 섹션
│   ├── 날짜 선택 섹션 (캘린더)
│   ├── 회차 선택 섹션
│   ├── 좌석 선택 섹션 (좌석 배치도)
│   └── 예매 정보 요약 섹션
├── 예약 완료 페이지 (/booking/success)
│   ├── 예약 확인 정보
│   └── 추가 액션 버튼들
├── 예약 조회 페이지 (/reservations)
│   ├── 예약 검색 폼
│   └── 예약 목록
├── 예약 상세 페이지 (/reservations/[id])
│   ├── 예약 상세 정보
│   └── 취소/변경 옵션
└── 에러 페이지 (/error)
    ├── 에러 메시지
    └── 복구 액션 버튼
```


---

### **3. 페이지별 상세 기획**

#### **3.1. 메인 페이지 (콘서트 목록)**

- **화면 구성**
    - **헤더**: 사이트 로고 또는 이름
    - **콘서트 리스트**: 예매 가능한 콘서트들이 카드로 나열됩니다. 각 카드는 다음 요소를 포함합니다.
        - 콘서트 포스터 이미지
        - 콘서트 제목
        - '예매하기' 버튼

- **기능 명세**
    - ① **콘서트 목록 표시**: 시스템에 등록된 예매 가능 콘서트 목록을 불러와 화면에 표시합니다.
    - ② **예매 페이지 이동**: 사용자가 특정 콘서트의 '예매하기' 버튼을 클릭하면, 해당 콘서트의 고유 ID를 가지고 예약 페이지로 이동합니다.

#### **3.2. 예약 페이지 (날짜, 회차, 좌석 선택)**

- **화면 구성**
    - **콘서트 기본 정보**: 선택한 콘서트의 제목, 포스터, 간략한 설명이 표시됩니다.
    - **날짜 선택 (캘린더)**: 예매 가능한 날짜들이 활성화된 달력을 보여줍니다.
    - **회차 선택**: 선택한 날짜에 예매 가능한 시간(회차) 목록을 보여줍니다.
    - **좌석 배치도 (Seating Chart)**:
        - 무대(Stage) 위치가 표시됩니다.
        - 전체 좌석이 등급 또는 구역별로 시각적으로 배치됩니다.
        - 좌석은 상태에 따라 색상으로 구분됩니다:
          - `선택 가능(회색)`: 예약 가능한 좌석
          - `선택 불가(어두운 회색)`: 이미 다른 사용자가 예약 완료한 좌석
          - `내 선택(보라색)`: 현재 사용자가 선택한 좌석
        - **중복 예약 방지**: 이미 예약된 좌석은 실시간으로 비활성화되어 다른 사용자가 선택할 수 없습니다.
    - **예매 정보**:
        - 선택한 좌석 번호 목록
        - 총 결제 금액
    - **액션 버튼**:
        - '좌석 선택 완료' 버튼

- **기능 명세**
    - ① **날짜 선택 기능**:
        - 사용자가 달력에서 특정 날짜를 선택하면 해당 날짜가 활성화 상태로 표시됩니다.
        - 날짜 선택 시, 해당 날짜의 예매 가능한 회차 정보를 불러옵니다.
    - ② **회차 선택 기능**:
        - 사용자가 특정 회차를 선택하면 해당 회차가 활성화 상태로 표시됩니다.
        - 날짜와 회차가 모두 선택되면, 해당 조건에 맞는 좌석 배치도를 불러옵니다.
    - ③ **실시간 좌석 선택 기능**:
        - '선택 가능' 상태의 좌석을 클릭하면 '내 선택' 상태로 변경되며, 예매 정보 섹션에 해당 좌석 번호와 가격이 추가됩니다.
        - '내 선택' 상태의 좌석을 다시 클릭하면 선택이 취소되고 '선택 가능' 상태로 돌아가며, 예매 정보에서도 제외됩니다.
        - **이미 예약된 좌석 비활성화**: 다른 사용자가 이미 예약 완료한 좌석은 '선택 불가(예약됨)' 상태로 표시되며 클릭할 수 없습니다.
        - **실시간 좌석 상태 동기화**: 다른 사용자가 실시간으로 좌석을 예약하면 즉시 해당 좌석이 비활성화되어 중복 예약을 방지합니다.
        - (선택) 1인당 최대 예매 가능 좌석 수를 제한할 수 있습니다 (예: 최대 4석).
    - ④ **총 결제 금액 자동 계산**: 좌석을 선택하거나 취소할 때마다 총 결제 금액이 실시간으로 변경되어 표시됩니다.
    - ⑤ **예약 완료 처리**:
        - 사용자가 좌석을 하나 이상 선택했을 때 '좌석 선택 완료' 버튼이 활성화됩니다.
        - 이 버튼을 클릭하면 최종 예약이 처리되고, 예약 완료 페이지로 넘어갑니다. (실제 프로젝트에서는 이 단계에서 사용자 정보 입력 및 결제 페이지로 이동합니다.)

#### **3.3. 예약 완료 페이지**

- **화면 구성**
    - **예약 완료 메시지**: "예약이 성공적으로 완료되었습니다." 와 같은 안내 문구
    - **예약 상세 내역**:
        - 예매한 콘서트 제목
        - 관람 일시 (날짜 및 시간)
        - 선택한 좌석 번호
        - 최종 결제 금액
    - **액션 버튼**:
        - '예약 조회하기' 버튼
        - '메인으로 돌아가기' 버튼

- **기능 명세**
    - ① **예약 정보 표시**: 이전 단계에서 확정된 예약 정보를 최종적으로 보여주어 사용자가 내용을 확인할 수 있도록 합니다.
    - ② **후속 액션 제공**: 예약 조회 페이지로 이동하거나 메인 페이지로 돌아갈 수 있는 옵션을 제공합니다.

#### **3.4. 예약 조회 페이지**

- **화면 구성**
    - **헤더**: 사이트 로고 및 '예약 조회' 타이틀
    - **검색 폼**:
        - 예약 번호 입력 필드
        - 연락처(전화번호 또는 이메일) 입력 필드
        - '조회하기' 버튼
    - **예약 목록**: 검색 결과에 따른 예약 내역 리스트

- **기능 명세**
    - ① **예약 검색**: 예약 번호 또는 연락처 정보로 기존 예약을 검색합니다.
    - ② **예약 목록 표시**: 검색된 예약들을 카드 형태로 보여줍니다.
    - ③ **예약 상세 이동**: 특정 예약을 클릭하면 상세 페이지로 이동합니다.

#### **3.5. 예약 상세/취소 페이지**

- **화면 구성**
    - **예약 상세 정보**:
        - 예약 번호
        - 콘서트 정보 (제목, 포스터)
        - 관람 일시
        - 좌석 정보 및 가격
        - 예약 상태 (확정, 취소 등)
    - **액션 버튼**:
        - '예약 취소하기' 버튼 (취소 가능한 경우)
        - '목록으로 돌아가기' 버튼

- **기능 명세**
    - ① **예약 상세 정보 표시**: 선택한 예약의 모든 상세 정보를 보여줍니다.
    - ② **예약 취소 처리**: 취소 정책에 따라 예약 취소가 가능한 경우 취소 기능을 제공합니다.
    - ③ **취소 확인**: 취소 시 확인 다이얼로그를 통해 실수를 방지합니다.

#### **3.6. 에러 페이지**

- **화면 구성**
    - **에러 메시지**: 발생한 오류에 대한 사용자 친화적 설명
    - **복구 액션**:
        - '메인으로 돌아가기' 버튼
        - '이전 페이지로' 버튼
        - '고객센터 문의' 링크

- **기능 명세**
    - ① **에러 상황 안내**: 404, 500 등 시스템 오류 발생 시 적절한 안내 메시지를 제공합니다.
    - ② **복구 옵션 제공**: 사용자가 오류 상황에서 벗어날 수 있는 다양한 옵션을 제공합니다.

---

### **4. 데이터 모델 (예시)**

이 프로젝트를 구현하기 위해 다음과 같은 데이터 구조를 고려할 수 있습니다.

- **Concert (콘서트)**
    - `id`: 고유 식별자
    - `title`: 제목
    - `description`: 설명
    - `posterImageUrl`: 포스터 이미지 주소

- **Schedule (공연 일정)**
    - `id`: 고유 식별자
    - `concertId`: 어떤 콘서트에 속한 일정인지
    - `dateTime`: 공연 날짜 및 시간

- **Seat (좌석)**
    - `id`: 고유 식별자
    - `scheduleId`: 어떤 공연 일정의 좌석인지
    - `seatNumber`: 좌석 번호 (예: 'A10')
    - `grade`: 좌석 등급 (예: 'R', 'S', 'A')
    - `price`: 가격
    - `status`: 좌석 상태 ('available', 'reserved')

- **Reservation (예약)**
    - `id`: 고유 식별자 (예약 번호로도 사용)
    - `scheduleId`: 예약된 공연 일정
    - `seatIds`: 예약된 좌석 ID 목록
    - `totalPrice`: 총 결제 금액
    - `customerName`: 예약자 이름
    - `customerPhone`: 예약자 연락처
    - `customerEmail`: 예약자 이메일
    - `status`: 예약 상태 ('confirmed', 'cancelled')
    - `createdAt`: 예약 생성 시간
    - `cancelledAt`: 취소 시간 (취소된 경우)
